# ДОКУМЕНТАЦІЯ ПРОЕКТУ "КНИГАРНЯ ОНЛАЙН"

## ЗМІСТ

1. [Загальна інформація](#загальна-інформація)
2. [Встановлення та запуск](#встановлення-та-запуск)
3. [Специфікація додатку](#специфікація-додатку)
4. [Архітектура проекту](#архітектура-проекту)
5. [Робота з XML та XSLT](#робота-з-xml-та-xslt)
6. [Функціонал для клієнтів](#функціонал-для-клієнтів)
7. [Функціонал для менеджерів](#функціонал-для-менеджерів)
8. [API та модулі](#api-та-модулі)
9. [Тестування](#тестування)
10. [Розробка та внесення змін](#розробка-та-внесення-змін)

---

## ЗАГАЛЬНА ІНФОРМАЦІЯ

### Назва проекту
**Книгарня онлайн** (BookStore Online)

### Опис
Повнофункціональний веб-додаток електронної комерції для інтернет-магазину книг. Проект демонструє можливості XML технологій (XML, XSD, XSLT) в контексті реального бізнес-додатку з системою управління каталогом та замовленнями.

### Технологічний стек
- **Frontend:** HTML5, CSS3, JavaScript (Vanilla ES6+)
- **Backend:** Node.js, Express
- **Database:** SQLite (better-sqlite3)
- **XML Technologies:** XML, XSD, XSLT
- **XML Processing:** libxmljs2, xml2js

### Версія
2.0 (оновлено 19 листопада 2025)

### Автори
Розроблено як демонстраційний проект для навчальних цілей

---

## ВСТАНОВЛЕННЯ ТА ЗАПУСК

### Системні вимоги
- **Node.js:** версія 14.0 або новіша
- **NPM:** версія 6.0 або новіша
- **Операційна система:** Windows, macOS, Linux
- **Браузер:** Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### Встановлення залежностей

```bash
# Перейдіть до директорії проекту
cd BS

# Встановіть залежності
npm install
```

### Запуск додатку

**Варіант 1: Використання батника (Windows):**
```bash
# Подвійний клік на файл або запуск з командного рядка
start.bat
```

**Варіант 2: Через NPM скрипти:**
```bash
# Звичайний запуск
npm start

# Запуск з автоматичним перезавантаженням (для розробки)
npm run dev
```

**Варіант 3: Прямий запуск через Node.js:**
```bash
node server.js
```

### Доступ до додатку

Після запуску додаток буде доступний за адресою:
- **URL:** http://localhost:3000
- **Головна сторінка (каталог):** http://localhost:3000/
- **Панель менеджера:** http://localhost:3000/manager.html

### Тестові облікові дані

**Для клієнта:**
- Email: будь-яка валідна адреса (ivan@example.com, maria@test.com, тощо)

**Для менеджера:**
- Логін: `manager`
- Пароль: `manager123`

---

## СПЕЦИФІКАЦІЯ ДОДАТКУ

### 1. ЗАГАЛЬНИЙ ОПИС

**Призначення:** Демонстрація можливостей XML в електронній комерції через повнофункціональний інтернет-магазин книг з системою управління каталогом та замовленнями.

**Ключові особливості:**
- Двороліва система (Клієнт + Менеджер)
- Повна валідація даних за допомогою XSD схем
- XSLT трансформації для відображення даних
- Імпорт/експорт каталогу та замовлень у форматі XML
- CRUD операції з каталогом книг
- Система управління замовленнями зі статусами
- Кошик покупок з локальним збереженням

---

### 2. СИСТЕМА РОЛЕЙ

#### 2.1 Клієнт

**Доступний функціонал:**
- Перегляд каталогу книг
- Фільтрація та пошук книг
- Додавання книг до кошика
- Оформлення замовлення
- Перегляд історії своїх покупок
- Завантаження своїх замовлень у XML форматі

**Аутентифікація:**
- Тільки email адреса
- Збереження в localStorage браузера

#### 2.2 Менеджер

**Доступний функціонал:**
- Всі функції клієнта +
- **CRUD операції з каталогом:**
  - Створення нової книги
  - Редагування існуючої книги
  - Видалення книги (м'яке та жорстке)
  - Зміна наявності на складі
- **Управління замовленнями:**
  - Перегляд всіх замовлень
  - Зміна статусу замовлення
  - Пошук замовлень за клієнтом, датою, статусом
  - Додавання приміток до замовлення
- **Експорт/імпорт:**
  - Експорт каталогу в XML
  - Імпорт каталогу з XML
  - Експорт звіту замовлень в XML

**Аутентифікація:**
- Логін: `manager`
- Пароль: `manager123`

---

### 3. ФУНКЦІОНАЛЬНІ ВИМОГИ

#### 3.1 Перегляд каталогу

**Інформація про книгу:**
- Назва
- Автор
- Категорія (художня, технічна, наукова, дитяча)
- Ціна (грн)
- Опис
- ISBN
- Рік видання
- Наявність на складі
- Обкладинка (зображення)

**Фільтрація та пошук:**
- Фільтр за категоріями (множинний вибір)
- Фільтр за діапазоном цін (слайдер)
- Пошук за назвою книги
- Пошук за автором
- Сортування (за ціною, назвою, новизною)
- Фільтр за наявністю

#### 3.2 Кошик покупок

**Основні функції:**
- Додавання книги до кошика
- Зміна кількості товару (в межах наявності)
- Видалення з кошика
- Підрахунок загальної суми
- Збереження кошика в localStorage
- Очищення кошика

#### 3.3 Оформлення замовлення

**Форма замовлення включає:**
- Ім'я та прізвище *
- Email * (автоматично з аутентифікації)
- Телефон * (формат: +380XXXXXXXXX)
- Місто *
- Адреса доставки *

**Процес:**
1. Валідація форми
2. Генерація унікального ID замовлення
3. Генерація XML замовлення
4. Збереження замовлення в orders.xml
5. Підтвердження замовлення (модальне вікно)
6. Можливість завантажити замовлення у форматі XML

#### 3.4 Історія покупок

**Відображення замовлень:**
- ID замовлення
- Дата та час
- Кількість товарів
- Загальна сума
- Поточний статус

**Фільтри:**
- За статусом (всі, нове, обробляється, відправлено, виконано, скасовано)
- За датою (сьогодні, тиждень, місяць, рік, всі)

**Додаткові функції:**
- Детальна інформація про замовлення
- Повторне замовлення (копіювання товарів в кошик)
- Завантаження чека у XML

---

### 4. УПРАВЛІННЯ КАТАЛОГОМ (МЕНЕДЖЕР)

#### 4.1 Створення книги

**Обов'язкові поля:**
- Назва
- Автор
- Категорія (випадаючий список)
- Ціна (тільки числа > 0)
- Опис
- ISBN (формат: XXX-X-XXXX-XXXX-X)
- Рік видання (1900-2025)
- Кількість на складі (>=0)

**Опціональні поля:**
- URL зображення обкладинки

**Процес:**
1. Валідація всіх полів
2. Генерація унікального ID
3. Автоматичне оновлення catalog.xml
4. Валідація оновленого XML за XSD схемою
5. Підтвердження успішного додавання

#### 4.2 Редагування книги

**Можливості:**
- Зміна всіх полів (крім ID)
- Валідація змін
- Збереження в catalog.xml
- Перевірка посилань на книгу в активних замовленнях
- Попередження при зміні ціни (якщо є активні замовлення)

#### 4.3 Видалення книги

**Типи видалення:**
1. **М'яке видалення:** позначка `deleted="true"`, книга залишається в XML
2. **Жорстке видалення:** повне видалення з XML

**Перевірки:**
- Наявність книги в активних замовленнях
- Модальне вікно підтвердження

#### 4.4 Управління наявністю

**Функції:**
- Inline редагування кількості в таблиці
- Автоматичне позначення "немає в наявності" при stock=0
- Масове оновлення статусу (вибір декількох книг)

---

### 5. УПРАВЛІННЯ ЗАМОВЛЕННЯМИ (МЕНЕДЖЕР)

#### 5.1 Перегляд замовлень

**Таблиця замовлень містить:**
- № (ID замовлення)
- Дата та час
- Клієнт (ім'я + email)
- Кількість позицій
- Сума (грн)
- Статус (з кольоровими бейджами)
- Дії (переглянути, змінити статус)

**Додаткові можливості:**
- Сортування за будь-якою колонкою
- Пагінація (10/25/50 записів на сторінку)

#### 5.2 Фільтрація замовлень

**Доступні фільтри:**
- **За статусом:** Нове, Обробляється, Відправлено, Виконано, Скасовано
- **За датою:** Сьогодні, Вчора, Останній тиждень, Останній місяць, Довільний період
- **За клієнтом:** Пошук по email або імені
- **За сумою:** Діапазон (мін-макс)

#### 5.3 Зміна статусу

**Життєвий цикл замовлення:**
```
нове → обробляється → відправлено → виконано
  ↓         ↓              ↓
  →    скасовано      ←
```

**Процес зміни статусу:**
1. Вибір нового статусу з доступних переходів
2. Додавання коментаря (необов'язково)
3. Автоматичне збереження часу зміни
4. Оновлення orders.xml (атрибут status + запис в statusHistory)
5. Імітація email повідомлення клієнту

#### 5.4 Детальна інформація про замовлення

**Модальне вікно містить:**
- Інформацію про замовлення (ID, дата, статус)
- Дані клієнта (ім'я, email, телефон, місто, адреса)
- Список товарів (таблиця з назвою, ціною, кількістю, підсумком)
- Історія статусів (таблиця змін з датою/часом, статусом, коментарем)
- Примітки менеджера (текстове поле для додавання/редагування)

**Дії:**
- Редагування адреси доставки
- Зміна статусу
- Експорт в XML

---

### 6. ЕКСПОРТ/ІМПОРТ ДАНИХ (МЕНЕДЖЕР)

#### 6.1 Експорт каталогу

**Опції експорту:**
- Повний каталог (всі книги)
- Тільки доступні (stock > 0)
- За категорією (вибір категорії)

**Формат:** XML файл з валідацією за catalog.xsd

#### 6.2 Експорт замовлень

**Типи звітів:**
- Звіт за період (вибір дат від-до, вибір статусів)
- Звіт за клієнтом (введення email)
- Статистика продажів (період, кількість, сума, розподіл за статусами, топ-10 книг)

**Формат:** XML файл з валідацією за orders.xsd

#### 6.3 Імпорт каталогу

**Процес імпорту:**
1. Вибір XML файлу з комп'ютера
2. Валідація за catalog.xsd
3. Попередній перегляд змін (нові, оновлення, конфлікти)
4. Вибір опції імпорту:
   - Додати тільки нові
   - Оновити існуючі
   - Повна заміна каталогу
5. Підтвердження імпорту

---

## АРХІТЕКТУРА ПРОЕКТУ

### Структура файлів

```
BS/
├── server.js                     # Node.js сервер (Express)
├── package.json                  # Залежності та скрипти
├── start.bat                     # Батник для швидкого запуску
├── DOKUMENTATSIYA.md             # Ця документація
│
├── public/                       # Публічні файли
│   ├── index.html                # Головна сторінка (каталог)
│   ├── manager.html              # Панель менеджера
│   │
│   ├── css/                      # Стилі
│   │   ├── main.css              # Основні стилі, змінні, reset
│   │   ├── catalog.css           # Стилі каталогу та карток
│   │   ├── cart.css              # Стилі кошика
│   │   ├── forms.css             # Стилі форм
│   │   ├── manager.css           # Стилі панелі менеджера
│   │   ├── tables.css            # Стилі таблиць
│   │   └── responsive.css        # Адаптивність
│   │
│   ├── js/                       # JavaScript модулі
│   │   ├── app.js                # Головний файл, ініціалізація
│   │   ├── auth.js               # Аутентифікація та управління сесією
│   │   ├── xml-parser.js         # Робота з XML (парсинг, валідація)
│   │   ├── catalog-manager.js    # Управління каталогом
│   │   ├── cart-manager.js       # Управління кошиком
│   │   ├── order-processor.js    # Обробка замовлень
│   │   ├── manager-panel.js      # Панель менеджера
│   │   ├── xslt-processor.js     # XSLT трансформації
│   │   └── utils.js              # Допоміжні функції
│   │
│   └── images/                   # Зображення
│       ├── logo.svg              # Логотип
│       ├── placeholder.jpg       # Заглушка для книг
│       └── books/                # Обкладинки книг
│           ├── book_001.jpg
│           └── README.txt
│
├── data/                         # XML дані
│   ├── catalog.xml               # Каталог книг
│   ├── catalog.xsd               # Схема валідації каталогу
│   ├── orders.xml                # Замовлення
│   └── orders.xsd                # Схема валідації замовлень
│
└── xslt/                         # XSLT трансформації
    ├── catalog.xsl               # Трансформація каталогу
    ├── catalog-table.xsl         # Трансформація каталогу в таблицю
    ├── order-receipt.xsl         # Трансформація чека
    └── orders-table.xsl          # Трансформація списку замовлень
```

---

## РОБОТА З XML ТА XSLT

### 1. XML СТРУКТУРИ

#### catalog.xml - Каталог книг

```xml
<?xml version="1.0" encoding="UTF-8"?>
<catalog>
  <book id="book_001" deleted="false">
    <title>Майстер і Маргарита</title>
    <author>Михайло Булгаков</author>
    <category>художня</category>
    <price currency="UAH">299.00</price>
    <description>Культовий роман про любов і зраду...</description>
    <isbn>978-5-1712-3456-7</isbn>
    <year>2020</year>
    <stock>15</stock>
    <image>images/books/book_001.jpg</image>
  </book>
  <!-- Інші книги -->
</catalog>
```

**Атрибути:**
- `id` - унікальний ідентифікатор книги (обов'язковий)
- `deleted` - прапорець м'якого видалення (за замовчуванням false)

**Дочірні елементи:**
- `title` - назва книги (string)
- `author` - автор книги (string)
- `category` - категорія (enum: художня, технічна, наукова, дитяча)
- `price` - ціна з атрибутом currency="UAH" (decimal)
- `description` - опис книги (string)
- `isbn` - ISBN номер (pattern: XXX-X-XXXX-XXXX-X)
- `year` - рік видання (integer: 1900-2025)
- `stock` - кількість на складі (nonNegativeInteger)
- `image` - URL зображення (anyURI, опціонально)

#### orders.xml - Замовлення

```xml
<?xml version="1.0" encoding="UTF-8"?>
<orders>
  <order id="ORD-123456" date="2025-11-19T14:30:00" status="нове">
    <customer>
      <name>Іван Петренко</name>
      <email>ivan@example.com</email>
      <phone>+380501234567</phone>
      <city>Київ</city>
      <address>вул. Хрещатик, 1, кв. 5</address>
    </customer>
    <items>
      <item book_id="book_001" quantity="2">
        <title>Майстер і Маргарита</title>
        <price>299.00</price>
        <subtotal>598.00</subtotal>
      </item>
    </items>
    <total>598.00</total>
    <statusHistory>
      <statusChange date="2025-11-19T14:30:00" status="нове" comment="Замовлення створено клієнтом"/>
    </statusHistory>
    <notes>Клієнт просить зателефонувати перед доставкою</notes>
  </order>
</orders>
```

**Атрибути замовлення:**
- `id` - унікальний ідентифікатор (ID)
- `date` - дата створення (dateTime)
- `status` - поточний статус (enum)

**Статуси замовлення:**
- `нове` - щойно створене замовлення
- `обробляється` - менеджер прийняв в роботу
- `відправлено` - передано в службу доставки
- `виконано` - клієнт отримав товар
- `скасовано` - замовлення скасовано

### 2. XSD СХЕМИ ВАЛІДАЦІЇ

#### catalog.xsd

**Основні правила валідації:**
- Категорія: тільки 4 значення (художня, технічна, наукова, дитяча)
- Ціна: додатне число з 2 знаками після коми
- ISBN: формат XXX-X-XXXX-XXXX-X (регулярний вираз)
- Рік: діапазон 1900-2025
- Кількість: невід'ємне ціле число

#### orders.xsd

**Основні правила валідації:**
- Email: формат електронної пошти (регулярний вираз)
- Телефон: формат +380XXXXXXXXX (регулярний вираз)
- Статус: тільки 5 дозволених значень
- Кількість товару: тільки додатні цілі числа
- Дата: формат ISO 8601 (dateTime)

### 3. XSLT ТРАНСФОРМАЦІЇ

#### catalog.xsl - Картки книг для каталогу

**Входи:** catalog.xml
**Вихід:** HTML картки книг для відображення на головній сторінці

**Основні функції:**
- Фільтрація видалених книг (`deleted='false'`)
- Відображення обкладинки або заглушки
- Умовне відображення кнопки "До кошика" (залежно від наявності)
- Форматування ціни
- Застосування CSS класів для категорій

#### catalog-table.xsl - Таблиця каталогу

**Входи:** catalog.xml
**Вихід:** HTML таблиця для панелі менеджера

**Основні функції:**
- Відображення всіх книг (включно з видаленими)
- Inline редагування полів
- Кнопки дій (редагувати, видалити)
- Індикатори наявності

#### order-receipt.xsl - Чек замовлення

**Входи:** одне замовлення (order)
**Вихід:** HTML чек для друку або PDF

**Основні функції:**
- Форматування дати
- Форматування ціни з 2 знаками після коми
- Таблиця товарів
- Підрахунок загальної суми
- Інформація про клієнта

#### orders-table.xsl - Таблиця замовлень

**Входи:** orders.xml
**Вихід:** HTML таблиця для панелі менеджера

**Основні функції:**
- Сортування за датою
- Кольорові бейджі для статусів
- Форматування дати та часу
- Кнопки дій (переглянути, змінити статус)

---

## API ТА МОДУЛІ

### 1. auth.js - Аутентифікація

```javascript
class Auth {
  // Вхід клієнта або менеджера
  login(email, role) { }

  // Вихід з системи
  logout() { }

  // Отримання поточного користувача
  getCurrentUser() { }

  // Перевірка ролі менеджера
  isManager() { }

  // Перевірка авторизації
  checkAuth() { }
}
```

### 2. xml-parser.js - Робота з XML

```javascript
class XMLParser {
  // Завантаження XML файлу з сервера
  async loadXML(url) { }

  // Парсинг XML рядка в DOM
  parseXML(xmlString) { }

  // Валідація XML за XSD схемою
  validateXML(xml, xsd) { }

  // Збереження XML файлу
  async saveXML(filename, xmlDoc) { }

  // XPath запити до XML
  xpathQuery(xml, query) { }

  // Серіалізація DOM в рядок
  serializeXML(xmlDoc) { }
}
```

### 3. catalog-manager.js - Управління каталогом

```javascript
class CatalogManager {
  // Завантаження каталогу з сервера
  async loadCatalog() { }

  // Отримання книг з фільтрацією
  getBooks(filters) { }

  // Отримання книги за ID
  getBookById(id) { }

  // Пошук книг за запитом
  searchBooks(query) { }

  // Сортування книг
  sortBooks(field, order) { }

  // Фільтр за категоріями
  filterByCategory(categories) { }

  // Фільтр за ціною
  filterByPrice(min, max) { }

  // === МЕТОДИ ДЛЯ МЕНЕДЖЕРА ===

  // Додавання нової книги
  async addBook(bookData) { }

  // Оновлення книги
  async updateBook(id, bookData) { }

  // Видалення книги (м'яке або жорстке)
  async deleteBook(id, hardDelete = false) { }

  // Оновлення кількості на складі
  async updateStock(id, quantity) { }
}
```

### 4. cart-manager.js - Управління кошиком

```javascript
class CartManager {
  // Додати книгу до кошика
  addToCart(bookId, quantity = 1) { }

  // Видалити книгу з кошика
  removeFromCart(bookId) { }

  // Оновити кількість книги
  updateQuantity(bookId, quantity) { }

  // Отримати весь кошик
  getCart() { }

  // Підрахувати загальну суму
  getTotal() { }

  // Очистити кошик
  clearCart() { }

  // Зберегти кошик в localStorage
  saveCart() { }

  // Завантажити кошик з localStorage
  loadCart() { }

  // Отримати кількість товарів
  getItemCount() { }
}
```

### 5. order-processor.js - Обробка замовлень

```javascript
class OrderProcessor {
  // Створити нове замовлення
  async createOrder(customerData, cartItems) { }

  // Отримати всі замовлення з фільтрами
  async getOrders(filters = {}) { }

  // Отримати замовлення за ID
  async getOrderById(orderId) { }

  // Отримати замовлення клієнта за email
  async getOrdersByEmail(email) { }

  // === МЕТОДИ ДЛЯ МЕНЕДЖЕРА ===

  // Змінити статус замовлення
  async updateOrderStatus(orderId, newStatus, comment = '') { }

  // Додати примітки до замовлення
  async addOrderNotes(orderId, notes) { }

  // Пошук замовлень
  searchOrders(query) { }

  // Експорт замовлень в XML
  async exportOrders(filters = {}) { }
}
```

### 6. manager-panel.js - Панель менеджера

```javascript
class ManagerPanel {
  // Показати панель менеджера
  showPanel() { }

  // Сховати панель менеджера
  hidePanel() { }

  // Відобразити таблицю каталогу
  renderCatalogTable(books) { }

  // Відобразити таблицю замовлень
  renderOrdersTable(orders) { }

  // Показати форму додавання книги
  showAddBookForm() { }

  // Показати форму редагування книги
  showEditBookForm(bookId) { }

  // Показати детальну інформацію про замовлення
  showOrderDetails(orderId) { }

  // Показати форму зміни статусу
  showStatusChangeForm(orderId) { }

  // Експорт каталогу
  async exportCatalog(options) { }

  // Імпорт каталогу
  async importCatalog(file) { }
}
```

### 7. xslt-processor.js - XSLT трансформації

```javascript
class XSLTProcessor {
  // Завантажити XSL файл
  async loadXSL(url) { }

  // Виконати XSLT трансформацію
  transform(xmlDoc, xslDoc) { }

  // Застосувати трансформацію до елемента
  applyToElement(xmlDoc, xslDoc, targetElement) { }
}
```

### 8. utils.js - Допоміжні функції

```javascript
// === ФОРМАТУВАННЯ ===

// Форматування ціни (123.45 → "123.45 грн")
function formatPrice(price) { }

// Форматування дати (ISO 8601 → "19.11.2025 14:30")
function formatDate(dateString) { }

// Форматування телефону (+380501234567 → "+380 50 123 45 67")
function formatPhone(phone) { }

// === ВАЛІДАЦІЯ ===

// Валідація email
function validateEmail(email) { }

// Валідація телефону (формат +380XXXXXXXXX)
function validatePhone(phone) { }

// Валідація ISBN (формат XXX-X-XXXX-XXXX-X)
function validateISBN(isbn) { }

// === ГЕНЕРАТОРИ ID ===

// Генерація ID для книги (book_XXX)
function generateBookId() { }

// Генерація ID для замовлення (ORD-XXXXXX)
function generateOrderId() { }

// === DOM ДОПОМОГА ===

// Показати модальне вікно
function showModal(content, title = '') { }

// Сховати модальне вікно
function hideModal() { }

// Показати повідомлення (toast)
function showToast(message, type = 'info') { }

// Показати індикатор завантаження
function showLoader() { }

// Сховати індикатор завантаження
function hideLoader() { }
```

---

## ТЕСТУВАННЯ

### Функціональне тестування

**Тестування функціоналу клієнта:**
1. ✅ Вхід клієнта з email
2. ✅ Перегляд каталогу книг
3. ✅ Фільтрація за категоріями
4. ✅ Фільтрація за ціною
5. ✅ Пошук книг
6. ✅ Додавання книг до кошика
7. ✅ Зміна кількості в кошику
8. ✅ Видалення з кошика
9. ✅ Оформлення замовлення
10. ✅ Валідація форми замовлення
11. ✅ Перегляд історії замовлень
12. ✅ Фільтрація замовлень за статусом
13. ✅ Детальна інформація про замовлення
14. ✅ Повторне замовлення
15. ✅ Експорт замовлення в XML

**Тестування функціоналу менеджера:**
1. ✅ Вхід менеджера (логін/пароль)
2. ✅ Перегляд таблиці каталогу
3. ✅ Додавання нової книги
4. ✅ Валідація форми книги
5. ✅ Редагування книги
6. ✅ М'яке видалення книги
7. ✅ Жорстке видалення книги
8. ✅ Оновлення кількості на складі
9. ✅ Перегляд таблиці замовлень
10. ✅ Фільтрація замовлень
11. ✅ Пошук замовлень за клієнтом
12. ✅ Детальна інформація про замовлення
13. ✅ Зміна статусу замовлення
14. ✅ Додавання приміток до замовлення
15. ✅ Експорт каталогу в XML
16. ✅ Імпорт каталогу з XML
17. ✅ Експорт замовлень в XML

### Валідація XML

1. ✅ Валідація catalog.xml за catalog.xsd
2. ✅ Валідація orders.xml за orders.xsd
3. ✅ Перевірка коректності ISBN
4. ✅ Перевірка формату телефону
5. ✅ Перевірка формату email
6. ✅ Перевірка діапазону року
7. ✅ Перевірка категорій
8. ✅ Перевірка статусів замовлень

### XSLT трансформації

1. ✅ Трансформація каталогу в картки
2. ✅ Трансформація каталогу в таблицю
3. ✅ Трансформація замовлення в чек
4. ✅ Трансформація замовлень в таблицю
5. ✅ Умовне відображення даних
6. ✅ Форматування цін та дат

### Тестування на різних пристроях

1. ✅ Desktop (1920x1080, 1366x768)
2. ✅ Tablet (768x1024)
3. ✅ Mobile (375x667, 414x896)
4. ✅ Адаптивний дизайн
5. ✅ Тач-події на мобільних пристроях

### Тестування продуктивності

1. ✅ Швидкість завантаження каталогу
2. ✅ Час виконання фільтрації
3. ✅ Час оновлення кошика
4. ✅ Час валідації XML
5. ✅ Оптимізація DOM операцій

---

## РОЗРОБКА ТА ВНЕСЕННЯ ЗМІН

### Додавання нової книги в каталог

**Варіант 1: Через інтерфейс менеджера**
1. Увійдіть як менеджер (manager / manager123)
2. Перейдіть до панелі менеджера
3. Натисніть "Додати нову книгу"
4. Заповніть всі обов'язкові поля
5. Натисніть "Зберегти"

**Варіант 2: Безпосереднє редагування XML**
1. Відкрийте файл `data/catalog.xml`
2. Додайте новий елемент `<book>`:
```xml
<book id="book_XXX" deleted="false">
  <title>Назва книги</title>
  <author>Автор</author>
  <category>художня</category>
  <price currency="UAH">299.00</price>
  <description>Опис книги</description>
  <isbn>978-5-1712-3456-7</isbn>
  <year>2025</year>
  <stock>10</stock>
  <image>images/books/book_XXX.jpg</image>
</book>
```
3. Збережіть файл
4. Перезавантажте сторінку

### Додавання нової категорії

Щоб додати нову категорію книг, потрібно внести зміни в 3 місця:

**1. Оновіть XSD схему (`data/catalog.xsd`):**
```xml
<xs:element name="category">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:enumeration value="художня"/>
      <xs:enumeration value="технічна"/>
      <xs:enumeration value="наукова"/>
      <xs:enumeration value="дитяча"/>
      <xs:enumeration value="нова_категорія"/>  <!-- додайте нову -->
    </xs:restriction>
  </xs:simpleType>
</xs:element>
```

**2. Оновіть JavaScript код фільтрів (`public/js/catalog-manager.js`):**
```javascript
const categories = [
  'художня',
  'технічна',
  'наукова',
  'дитяча',
  'нова_категорія'  // додайте нову
];
```

**3. Оновіть CSS стилі для нової категорії (`public/css/catalog.css`):**
```css
.badge-нова_категорія {
  background-color: #your-color;
  color: #fff;
}
```

### Додавання нового статусу замовлення

**1. Оновіть XSD схему (`data/orders.xsd`):**
```xml
<xs:simpleType name="StatusType">
  <xs:restriction base="xs:string">
    <xs:enumeration value="нове"/>
    <xs:enumeration value="обробляється"/>
    <xs:enumeration value="відправлено"/>
    <xs:enumeration value="виконано"/>
    <xs:enumeration value="скасовано"/>
    <xs:enumeration value="новий_статус"/>  <!-- додайте новий -->
  </xs:restriction>
</xs:simpleType>
```

**2. Оновіть JavaScript код (`public/js/order-processor.js`):**
```javascript
const orderStatuses = {
  'нове': ['обробляється', 'скасовано'],
  'обробляється': ['відправлено', 'скасовано'],
  'відправлено': ['виконано', 'скасовано'],
  'виконано': [],
  'скасовано': [],
  'новий_статус': ['виконано']  // додайте новий з можливими переходами
};
```

**3. Оновіть CSS стилі (`public/css/manager.css`):**
```css
.status-badge.новий_статус {
  background-color: #your-color;
  color: #fff;
}
```

### Додавання нової XSLT трансформації

1. Створіть новий XSL файл в директорії `xslt/`
2. Напишіть правила трансформації
3. Зареєструйте трансформацію в `public/js/xslt-processor.js`
4. Використовуйте в потрібному місці коду

**Приклад нової трансформації:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <!-- Ваші правила трансформації -->
  </xsl:template>
</xsl:stylesheet>
```

### Робота з базою даних

Проект використовує SQLite базу даних для зберігання деяких даних. Файл бази даних: `bookstore.db`

**Підключення до бази:**
```javascript
const Database = require('better-sqlite3');
const db = new Database('bookstore.db');
```

**Виконання запитів:**
```javascript
// SELECT
const books = db.prepare('SELECT * FROM books').all();

// INSERT
const stmt = db.prepare('INSERT INTO books (title, author) VALUES (?, ?)');
stmt.run('Назва', 'Автор');

// UPDATE
db.prepare('UPDATE books SET price = ? WHERE id = ?').run(299, 1);

// DELETE
db.prepare('DELETE FROM books WHERE id = ?').run(1);
```

---

## ДОДАТКОВА ІНФОРМАЦІЯ

### Тестові дані

**Каталог містить 18+ книг:**
- Художня література: 6 книг
- Технічна література: 5 книг
- Наукова література: 4 книги
- Дитяча література: 3 книги

**Тестові замовлення: 3-4 замовлення**
- З різними статусами
- Від різних клієнтів
- З різними датами

### Обмеження та відомі проблеми

1. **Валідація XML:** Працює тільки на серверній стороні (Node.js)
2. **XSLT трансформації:** Обмежена підтримка XSLT 1.0 в браузерах
3. **Файлові операції:** Імпорт/експорт працює через сервер
4. **Аутентифікація:** Базова (без реальної безпеки)
5. **База даних:** SQLite (не підходить для production)

### Плани розвитку

- [ ] Реальна аутентифікація з JWT токенами
- [ ] PostgreSQL/MySQL замість SQLite
- [ ] REST API для всіх операцій
- [ ] WebSocket для real-time оновлень
- [ ] Статистика продажів з графіками
- [ ] Система знижок та промокодів
- [ ] Інтеграція з платіжними системами
- [ ] Інтеграція з API служб доставки
- [ ] Багатомовність (укр/англ/рус)
- [ ] Темна тема інтерфейсу

### Підтримка

**GitHub:** https://github.com/your-repo/bookstore-online
**Документація:** Цей файл (`DOKUMENTATSIYA.md`)
**Issues:** Створюйте issue на GitHub

### Ліцензія

MIT License - вільне використання для навчальних цілей

---

**Дата створення документації:** 20 листопада 2025
**Версія документації:** 1.0
**Автор документації:** Команда розробки BookStore Online

---

## КОРИСНІ КОМАНДИ

```bash
# Встановлення залежностей
npm install

# Запуск сервера (production)
npm start

# Запуск сервера з автоматичним перезавантаженням (development)
npm run dev

# Перевірка коду ESLint
npm test

# Очищення node_modules та перевстановлення
rm -rf node_modules package-lock.json && npm install

# Перевірка версії Node.js
node --version

# Перевірка версії NPM
npm --version
```

---

**Дякуємо за використання BookStore Online!**
